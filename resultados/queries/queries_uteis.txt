para saber o numero de artefatos atualemnte por projeto

SELECT p.name, COUNT(a.id) AS deleted_artifacts, 
    (SELECT COUNT(id) FROM Artifact WHERE Artifact.project_id=p.id) - COUNT(a.id) AS total_artifacts
FROM Artifact a 
JOIN Project p ON p.id = a.project_id 
JOIN Modification m ON m.artifact_id = a.id 
WHERE m.kind = 'DELETED'   
GROUP by p.id
ORDER BY p.name


SELECT deleted.name, deleted.deleted_artifacts, new.new_artifacts, new.new_artifacts - deleted.deleted_artifacts as total_artifacts from (
	SELECT p.name as name, p.id as pid, COUNT(distinct (a.id)) AS deleted_artifacts
	FROM Artifact a 
	JOIN Project p ON p.id = a.project_id 
	JOIN Modification m ON m.artifact_id = a.id 
	WHERE m.kind = 'DELETED'   
	GROUP by p.id
)
as deleted JOIN (
	SELECT p.name as name, p.id as pid, COUNT(distinct (a.id)) AS new_artifacts
	FROM Artifact a 
	JOIN Project p ON p.id = a.project_id 
	JOIN Modification m ON m.artifact_id = a.id 
	WHERE m.kind = 'NEW'   
	GROUP by p.id
) as new ON new.pid = deleted.pid
ORDER BY total_artifacts;


total de commits

SELECT p.name, COUNT(c.id) FROM Project p 
JOIN Commit c ON c.project_id = p.id
GROUP BY p.id
ORDER BY p.name


SELECT p.name, COUNT(a.id) FROM Project p 
JOIN Artifact a ON a.project_id = p.id
GROUP BY p.id
ORDER BY p.name
